{% load bootstrap4 %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
<html>
<!-- <head>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
          google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawChart);
    
          function drawChart() {
            var data = google.visualization.arrayToDataTable([
              ['Year', 'Sales', 'Expenses'],
              ['2004',  1000,      400],
              ['2005',  1170,      460],
              ['2006',  660,       1120],
              ['2007',  1030,      540]
            ]);
    
            var options = {
              title: 'Company Performance',
              curveType: 'function',
              legend: { position: 'bottom' }
            };
    
            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
    
            chart.draw(data, options);
          }
        </script>
      </head> -->

<body>
    <div class="container">
        <!-- <div id="curve_chart" style="width: 900px; height: 500px"></div> -->
        {% if user.is_authenticated %}
        <div class = "display: inline-block;">
            <div style = "float:left;padding-top: 20px;">
            <a href="{% url 'grades:index' %}"><i class = "fa fa-angle-left"></i> Back</a>
        </div>
        <div style = "text-align: center; font-size: 40px;"><strong>{{ indCourse.course_name }}</strong></div>
    </div>
        
        {% if indCourse.course_grade == 0 is True %}
        <div>
            <h2 style="float: left;">Current grade:</h2>
            <h2 style="color: black; padding-left: 8em;"> {{ indCourse.course_grade }}%</h2>
        </div>
        {% elif indCourse.improved is False %}
        <div>
            <h2 style="float: left;">Current grade:</h2>
            <h2 style="color: red; padding-left: 8em;"> {{ indCourse.course_grade }}%<i class="fa fa-angle-down"
                    style="color: red; padding-left: 5px;"></i></h2>
        </div>
        {% elif indCourse.improved is True %}
        <div>
            <h2 style="float: left;">Current grade:</h2>
            <h2 style="color: #39D043; padding-left: 8em;"> {{ indCourse.course_grade }}%<i class="fa fa-angle-up"
                    style="color: #39D043; padding-left: 5px;"></i></h2>
        </div>
        {% endif %}

        {% if indCourse %}
        {% for assType in indCourse.asstype_set.all %}
        <div class="container">
            <div class="row" style="display: flexbox; justify-content: space-between; font-size: 24px;">
                <div style=" float: left; position: relative;">
                    <p>Assignment Type: {{ assType.ass_type }} </p>
                </div>
                <div style="width: 200px; float: right; position:relative;">
                    <p>Worth: {{ assType.grade_percentage }}%
                        <a href="{% url 'grades:RemoveType' course_id=indCourse.id asstype_id=assType.id%}"><i
                                class="fa fa-trash"></i> </a></p>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">


                <div class="col-sm" style="width: 100;">
                    {% if assType.assignment_set.exists %}
                    Assignment Name<br>
                    {% endif %}
                    <ul>
                        {% for assignment in assType.assignment_set.all %}
                        <p>{{ assignment.ass_name }} </p>
                        {% endfor %}

                    </ul>
                </div>

                <div class="col-sm" style="width: 100;">
                    {% if assType.assignment_set.exists %}
                    Assignment Grade<br>
                    {% endif %}
                    <ul>
                        {% for assignment in assType.assignment_set.all %}
                        <p> {{ assignment.grade }}%
                            <a
                                href="{% url 'grades:RemoveAssignment' course_id=indCourse.id assignment_id=assignment.id%}"><i
                                    class="fa fa-trash"></i></a></p>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        <!-- <h4>Enter New Assignment</h4> -->

        <!-- <form action="{% url 'grades:NewAssignment' indCourse.id assType.id%}" method="post">
            {% csrf_token %}
            <div style="display: inline-block;">
                <div style="float: left;">
                    <label for="name_input" style="font-size:larger;">Enter New {{ assType.ass_type }} </label>
                    <input class="form-control" type="text" name="course_name" id="name_input" style="width: 160px;"
                        placeholder="Assignment name">
                </div>
                <div style="float: left; padding-left: 20px;">
                    <label for="grade_input" style="font-size: larger;">Enter Grade Achieved</label>
                    <input class="form-control" type="number" name="grade_input" id="grade_input" style="width: 125px;"
                        placeholder="E.g. 100%">
                </div>
                <div style="float: left; padding-left: 20px; padding-top: 40px;">
                    <input type="submit" value="Submit">
                </div>
            </div> -->
        <!-- <label for="grade_percentage" style="font-size: larger;">How much of your total grade is this assignment worth?
              (in percent)</label>
          <input class="form-control" type="number" name="grade_percentage" id="grade_percentage" style = "width: 75px;"> -->


        {% endfor %}
        {% endif %}
        {% if indCourse.asstype_set.exists %}
        <div style = "position: relative; bottom: -225;">
        <h4>Enter New Assignment</h4>
        <form action="{% url 'grades:NewAssignment2' indCourse.id%}" method="post">
            {% csrf_token %}
            <!-- {{ form }} -->

            <div class="form-row">
                <div class="col-md-4 mb-3">
                    <div>
                        <label for="ass_name">Assignment Name</label>
                        <input class="form-control" type="text" name="ass_name" id="assname"
                            placeholder="Assignment name" required>
                        <div class="invalid-feedback">
                            Please enter a name.
                        </div>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="grade">Enter Grade Achieved</label>
                    <input class="form-control" type="number" name="grade" id="grade" placeholder="E.g. 100%" required>
                </div>

                <div class="col-md-4 mb-3">

                    <label for="ass_type">Select Assignment Type</label>
                    <select class="form-control" id="assignment_type_input" name="ass_type" required>
                        <option value="" disabled selected>Assignment Type</option>
                        {% for assType in indCourse.asstype_set.all %}
                        <option value={{ assType.id }}>{{ assType.ass_type }}</option>
                        {% endfor %}
                    </select>
                    <!-- </div> -->

                </div>

                
            </div>
            {% if form.errors %}
            {% for field in form %}
            {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
            {% endfor %}
            {% endfor %}
           
            {% endif %}
            
            <button class="btn btn-primary btn-sm" type="submit">Submit form</button>
        </form>
        {% endif %}
        <h4>Enter New Assignment Type</h4>
        <div>
            <form action="{% url 'grades:NewType' indCourse.id%}" method="post">
                {% csrf_token %}
                <div class="form-row">
                    <div class = "col-md-6 mb-2">
                <label for="ass_type" >Assignment Type</label>
                <input class="form-control " type="text" name="ass_type" id="ass_type" 
                    placeholder="E.g. test" required>
                </div>
                <div class = "col-md-6 mb-2">
                <label for="grade_percentage" >Assignment Weight</label>
                <input class="form-control" type="number" name="grade_percentage" id="grade_percentage" 
                    placeholder="E.g. 25%" required>
                </div>
                <!-- <label for="grade_percentage" style="font-size: larger;">How much of your total grade is this assignment worth?
            (in percent)</label>
        <input class="form-control" type="number" name="grade_percentage" id="grade_percentage" style = "width: 75px;"> -->
                </div>        
                {% if form2.errors %}
            {% for field in form2 %}
            {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
            {% endfor %}
            {% endfor %}
            {% for error in form2.non_field_errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
            {% endif %}

                <button class="btn btn-primary btn-sm" type="submit">Submit form</button>
            </form>
        </div>
    </div>



        <!-- <form class="needs-validation" novalidate>
            <div class="form-row">
                <div class="col-md-4 mb-3">
                    <label for="validationCustom01">First name</label>
                    <input type="text" class="form-control" id="validationCustom01" placeholder="First name"
                        value="Mark" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="validationCustom02">Last name</label>
                    <input type="text" class="form-control" id="validationCustom02" placeholder="Last name" value="Otto"
                        required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="validationCustomUsername">Username</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroupPrepend">@</span>
                        </div>
                        <input type="text" class="form-control" id="validationCustomUsername" placeholder="Username"
                            aria-describedby="inputGroupPrepend" required>
                        <div class="invalid-feedback">
                            Please choose a username.
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col-md-6 mb-3">
                    <label for="validationCustom03">City</label>
                    <input type="text" class="form-control" id="validationCustom03" placeholder="City" required>
                    <div class="invalid-feedback">
                        Please provide a valid city.
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="validationCustom04">State</label>
                    <input type="text" class="form-control" id="validationCustom04" placeholder="State" required>
                    <div class="invalid-feedback">
                        Please provide a valid state.
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="validationCustom05">Zip</label>
                    <input type="text" class="form-control" id="validationCustom05" placeholder="Zip" required>
                    <div class="invalid-feedback">
                        Please provide a valid zip.
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        Agree to terms and conditions
                    </label>
                    <div class="invalid-feedback">
                        You must agree before submitting.
                    </div>
                </div>
            </div>
            <button class="btn btn-primary btn-sm" type="submit">Submit form</button>
        </form>
 -->


        {% else %}
        <h1>Please log in to see your Personal Dashboard</h1>
        <a href="{% url 'social:begin' 'google-oauth2' %}">
            Login
        </a>
        {% endif %}
    </div>

</body>

</html>